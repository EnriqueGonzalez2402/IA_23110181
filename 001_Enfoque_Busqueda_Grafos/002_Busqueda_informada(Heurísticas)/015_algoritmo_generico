import random

# Grafo: nodos y sus vecinos
graph = {
    'A': ['B', 'C'],
    'B': ['D', 'E'],
    'C': ['F'],
    'D': [],
    'E': ['F'],
    'F': []
}

# Heurística: estimación de la distancia restante al objetivo F
heuristic = {
    'A': 6,
    'B': 4,
    'C': 2,
    'D': 7,
    'E': 1,
    'F': 0
}

start = 'A'
goal = 'F'

def genetic_algorithm(graph, start, goal, heuristic, population_size=6, generations=10):
    # Función de fitness: cuanto más cerca del objetivo, mejor
    def fitness(path):
        return -heuristic[path[-1]]

    # Mutación: cambia un nodo al azar en el camino
    def mutate(path):
        if len(path) > 2:
            i = random.randint(1, len(path)-2)
            path[i] = random.choice(list(graph.keys()))
        return path

    # Población inicial: caminos simples desde start
    population = [[start] for _ in range(population_size)]

    for _ in range(generations):
        # Selección de los dos mejores caminos
        scored = sorted(population, key=fitness, reverse=True)
        parents = scored[:2]

        # Cruce: combinamos caminos de los padres
        child = parents[0][:1] + parents[1][1:]
        # Mutación aleatoria con probabilidad 0.3
        if random.random() < 0.3:
            child = mutate(child)

        # Añadimos hijo a la población
        population.append(child)

        # Revisamos si alguien llegó al objetivo
        for p in population:
            if p[-1] == goal:
                return p

    return None

path_genetic = genetic_algorithm(graph, start, goal, heuristic)
print("1️⃣5️⃣ Algoritmo Genético:", path_genetic)
